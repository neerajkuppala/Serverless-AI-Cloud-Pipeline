<script>
    async function summarize() {
        const text = document.getElementById('userInput').value;
        const btn = document.getElementById('btn');
        const resultDiv = document.getElementById('result');
        const summarySpan = document.getElementById('summaryText');

        if (!text) { 
            alert("Please paste some text first!"); 
            return; 
        }

        btn.innerText = "Summarizing..."; 
        btn.disabled = true;

        try {
            // FIXED: Added quotes and the /hello path
            const API_URL = 'https://3sxhm8etp1.execute-api.us-east-1.amazonaws.com/hello'; 

            const response = await fetch(API_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ "text_to_summarize": text })
            });

            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const data = await response.json();
            resultDiv.style.display = 'block';
            summarySpan.innerText = data.summary || data.message || "Success!";
            
        } catch (error) { 
            console.error("Error details:", error); 
            alert("Connection failed. Check Console (F12) for details."); 
        } finally { 
            btn.innerText = "Generate Summary"; 
            btn.disabled = false; 
        }
    }
</script>